# 503 Error Troubleshooting - Quick Fix Guide

## Issue: API returns 503 Service Unavailable

### Most Common Causes:

1. **Vendor folder not uploaded**
   - The `api/vendor` folder is LARGE (~50MB)
   - FTP might have timed out or skipped it
   - **Solution**: Re-upload `api/vendor` folder completely

2. **Environment variable incorrect**
   - Check `api/.env` has `CI_ENVIRONMENT = production` (lowercase)
   - **Solution**: Edit via FTP file manager

3. **File permissions**
   - `api/writable` must be writable (755)
   - **Solution**: Contact hosting support

4. **PHP version too old**
   - Requires PHP 8.1+
   - **Solution**: Check hosting control panel

## Diagnostic Steps:

### Step 1: Upload diagnostic files
Upload these new files via FTP:
- `api/public/api-test.php` → Test API folder directly
- `server-info.php` → Check server configuration

### Step 2: Test the diagnostic files
Visit these URLs:
1. `https://gcub.digitalks.in/server-info.php`
2. `https://gcub.digitalks.in/api/public/api-test.php`

### Step 3: Check results

**If api-test.php shows:**
- ✓ `codeigniter_loaded: true` → CodeIgniter is working, check routes
- ✗ `codeigniter_loaded: false` → Vendor folder issue
- ✗ `vendor_exists: false` → Vendor folder not uploaded

**If api-test.php doesn't load at all:**
- Check if `api/public/` folder exists
- Verify file was uploaded correctly

## Quick Fixes:

### Fix 1: Re-upload vendor folder
The `api/vendor` folder is critical. If FTP failed:
1. Compress `api/vendor` to ZIP locally
2. Upload ZIP file
3. Extract on server (via hosting file manager)

### Fix 2: Check .env file
Via FTP, edit `api/.env`:
```env
CI_ENVIRONMENT = production
app.baseURL = 'https://gcub.digitalks.in/api/public/'
```

### Fix 3: Verify index.php
Check `api/public/index.php` exists and is readable

### Fix 4: Enable error display temporarily
Edit `api/public/index.php`, add after `<?php`:
```php
error_reporting(E_ALL);
ini_set('display_errors', 1);
```

This will show actual PHP errors instead of 503.

## What to Report:

After running diagnostics, report:
1. Output from `server-info.php`
2. Output from `api/public/api-test.php`
3. Any error messages shown

## Most Likely Solution:

**90% of 503 errors are caused by missing vendor folder.**

Re-upload the `api/vendor` folder completely. It contains all CodeIgniter framework files.
